{"version":3,"file":"file-config-library.mjs","sources":["../../../projects/file-config-library/src/lib/services/master.service.ts","../../../projects/file-config-library/src/lib/file-config-library.component.ts","../../../projects/file-config-library/src/lib/file-config-library.component.html","../../../projects/file-config-library/src/public-api.ts","../../../projects/file-config-library/src/file-config-library.ts"],"sourcesContent":["import { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { inject, Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class MasterService {\r\n  readonly http = inject(HttpClient);\r\n  // private BASE_URL: string = 'https://dev-api.file-service.mobioffice.io';\r\n\r\n  //#region POST\r\n  getDetailsWithProcess(payload: any, BASE_URL: string) {\r\n    return this.http.post(`${BASE_URL}/getFilesPath/v4`, payload);\r\n  }\r\n  //#endregion\r\n\r\n  //#region GET\r\n  // getProcessList() {\r\n  //   return this.http.get(`${this.BASE_URL}/pd/v1/FileProcessConfig/getAll`);\r\n  // }\r\n  //#endregion\r\n}\r\n","import { Component, inject, Input, OnInit } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MasterService } from './services/master.service';\r\n@Component({\r\n  selector: 'lib-file-config-library',\r\n  standalone: true,\r\n  imports: [FormsModule],\r\n  providers: [MasterService],\r\n  templateUrl: `./file-config-library.component.html`,\r\n  styleUrl: `./file-config-library.component.scss`,\r\n})\r\nexport class DashboardUiComponent implements OnInit {\r\n  private masterService = inject(MasterService);\r\n\r\n  ngOnInit() {\r\n    console.log('we are in dashboard library component');\r\n    this.onInit();\r\n  }\r\n\r\n  @Input() BASE_URL: string = 'https://dev-api.file-service.mobioffice.io';\r\n  menus: any = [];\r\n  styleSketchNumber: string | null = null;\r\n  selectedProcessName: string | null = null;\r\n  tableData: any[] = [];\r\n  styleDetailsForDownload: any;\r\n  selectedTab: 'latest' | 'history' = 'latest';\r\n  latestTableData: any[] = [];\r\n  historyTableData: any[] = [];\r\n\r\n  onInit() {\r\n    this.getAllMaster();\r\n  }\r\n\r\n  private getAllMaster() {\r\n    // this.masterService.getProcessList().subscribe((res: any) => {\r\n    //   console.log(res);\r\n    //   this.menus = res.data.map((item: any) => {\r\n    //     return { ...item, isSelected: false };\r\n    //   });\r\n    // });\r\n  }\r\n\r\n  itemSelected(item: any) {\r\n    console.log(item);\r\n    this.selectedProcessName = item.processName;\r\n    item.isSelected = true;\r\n    this.menus.map((item: any) => {\r\n      if (item.processName !== this.selectedProcessName)\r\n        item.isSelected = false;\r\n    });\r\n\r\n    console.log(this.styleDetailsForDownload);\r\n    if (this.selectedProcessName) {\r\n      const data =\r\n        this.styleDetailsForDownload.filePaths[this.selectedProcessName];\r\n      console.log(data);\r\n      this.prepareTableData(data);\r\n    }\r\n  }\r\n\r\n  // prepareTableData(data: any) {\r\n  //   this.tableData = Object.entries(data).map(([version, files]: any) => ({\r\n  //     version,\r\n  //     files: Object.entries(files).map(([fileName, details]: any) => ({\r\n  //       fileName,\r\n  //       createdDate: details.createdDate,\r\n  //       url: details.url,\r\n  //     })),\r\n  //   }));\r\n\r\n  //   console.log(this.tableData);\r\n  // }\r\n\r\n  prepareTableData(data: any) {\r\n    const allFiles: any[] = [];\r\n\r\n    // Flatten all versions into single array\r\n    Object.entries(data).forEach(([version, files]: any) => {\r\n      Object.entries(files).forEach(([fileName, details]: any) => {\r\n        allFiles.push({\r\n          version,\r\n          fileName,\r\n          createdDate: details.createdDate,\r\n          url: details.url,\r\n        });\r\n      });\r\n    });\r\n\r\n    // Sort by createdDate DESC\r\n    allFiles.sort((a, b) => {\r\n      const d1: any = this.parseDate(a.createdDate);\r\n      const d2: any = this.parseDate(b.createdDate);\r\n      return d2 - d1;\r\n    });\r\n\r\n    if (allFiles.length > 0) {\r\n      // ðŸ”¥ First element only â†’ Latest\r\n      const latestFile = allFiles[0];\r\n\r\n      this.latestTableData = [\r\n        {\r\n          version: latestFile.version,\r\n          files: [latestFile],\r\n        },\r\n      ];\r\n\r\n      // Remaining â†’ History (group back by version)\r\n      const remaining = allFiles.slice(1);\r\n\r\n      const groupedHistory: any = {};\r\n\r\n      remaining.forEach((file) => {\r\n        if (!groupedHistory[file.version]) {\r\n          groupedHistory[file.version] = [];\r\n        }\r\n        groupedHistory[file.version].push(file);\r\n      });\r\n\r\n      this.historyTableData = Object.entries(groupedHistory).map(\r\n        ([version, files]) => ({\r\n          version,\r\n          files,\r\n        }),\r\n      );\r\n    }\r\n\r\n    console.log('Latest:', this.latestTableData);\r\n    console.log('History:', this.historyTableData);\r\n  }\r\n\r\n  parseDate(dateStr: string): Date {\r\n    const [datePart, timePart] = dateStr.split(' ');\r\n    const [day, month, year] = datePart.split('-');\r\n    return new Date(`${year}-${month}-${day}T${timePart}`);\r\n  }\r\n\r\n  enterPressed() {\r\n    const payload = {\r\n      packetBarCode: this.styleSketchNumber,\r\n      rootFolderName: 'uploads',\r\n      isAllVersionNeeded: 1,\r\n    };\r\n\r\n    this.masterService.getDetailsWithProcess(payload, this.BASE_URL).subscribe({\r\n      next: (res: any) => {\r\n        this.styleDetailsForDownload = res;\r\n\r\n        if (res?.filePaths) {\r\n          const objectKeys = Object.keys(res.filePaths);\r\n          this.menus = objectKeys.map((item) => ({\r\n            processName: item,\r\n            isSelected: false,\r\n          }));\r\n        } else {\r\n          this.menus = [];\r\n          this.styleDetailsForDownload = [];\r\n        }\r\n      },\r\n      error: (err) => {\r\n        this.menus = [];\r\n        this.styleDetailsForDownload = [];\r\n        this.tableData = [];\r\n      },\r\n    });\r\n  }\r\n\r\n  downloadFile(file: any) {\r\n    const encodedUrl = encodeURIComponent(file.url);\r\n    const fullUrl = `${this.BASE_URL}/${encodedUrl}`;\r\n    window.open(fullUrl, '_blank');\r\n  }\r\n}\r\n","<div class=\"dashboard-component p-0 m-0\">\r\n  <!-- input filed to search style / sketch number -->\r\n  <div class=\"p-10 col-3 d-flex flex-column\">\r\n    <label class=\"form-group-label text-white-color mb-1\">Enter ID</label>\r\n    <input\r\n      type=\"text\"\r\n      class=\"form-control input-background-color text-white-color\"\r\n      placeholder=\"Enter ID\"\r\n      [(ngModel)]=\"styleSketchNumber\"\r\n      (keydown.enter)=\"enterPressed()\"\r\n    />\r\n  </div>\r\n\r\n  <div class=\"row m-0 p-0 master-container\">\r\n    <div class=\"col-12 m-0 p-0 d-flex\">\r\n      <!-- Sidebar -->\r\n      <div class=\"side__bar d-flex flex-column\">\r\n        @for (item of menus; track item) {\r\n          <div\r\n            class=\"menu-item list-item border-bottom-one\"\r\n            [class.active-menu]=\"item.isSelected\"\r\n            (click)=\"itemSelected(item)\"\r\n          >\r\n            <label class=\"menu-header w-100 cursor-pointer\">\r\n              {{ item.processName }}\r\n            </label>\r\n          </div>\r\n        }\r\n      </div>\r\n\r\n      <!-- Right content -->\r\n      <div class=\"display-container flex-grow-1 ms-3 p-10\">\r\n        <h4 class=\"text-white-color mb-1 border-bottom-one\">File Details:</h4>\r\n\r\n        @if (!!selectedProcessName) {\r\n          <div class=\"tabs\">\r\n            <button\r\n              class=\"tab-btn\"\r\n              [class.active]=\"selectedTab === 'latest'\"\r\n              (click)=\"selectedTab = 'latest'\"\r\n            >\r\n              Latest\r\n            </button>\r\n\r\n            <button\r\n              class=\"tab-btn\"\r\n              [class.active]=\"selectedTab === 'history'\"\r\n              (click)=\"selectedTab = 'history'\"\r\n            >\r\n              History\r\n            </button>\r\n          </div>\r\n        }\r\n\r\n        <!-- Table -->\r\n\r\n        @if (latestTableData.length || historyTableData.length) {\r\n          <table class=\"custom-table w-100 mt-2\">\r\n            <thead>\r\n              <tr>\r\n                <th class=\"text-white-color\">Version</th>\r\n                <th class=\"text-white-color\">File Name</th>\r\n                <th class=\"text-white-color\">Created Date</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              @for (\r\n                group of selectedTab === \"latest\"\r\n                  ? latestTableData\r\n                  : historyTableData;\r\n                track group.version\r\n              ) {\r\n                @for (\r\n                  file of group.files;\r\n                  track file.fileName;\r\n                  let i = $index\r\n                ) {\r\n                  <tr>\r\n                    <td class=\"text-white-color\">\r\n                      @if (i === 0) {\r\n                        {{ group.version }}\r\n                      }\r\n                    </td>\r\n                    <td>\r\n                      <div class=\"file-cell\">\r\n                        <span class=\"file-name text-white-color\">{{\r\n                          file.fileName\r\n                        }}</span>\r\n\r\n                        <svg\r\n                          class=\"download-icon\"\r\n                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          width=\"16\"\r\n                          height=\"16\"\r\n                          (click)=\"downloadFile(file)\"\r\n                          title=\"Download\"\r\n                        >\r\n                          <path\r\n                            fill=\"currentColor\"\r\n                            d=\"M5 20h14v-2H5v2Zm7-18v10.17l3.59-3.58L17 10l-5 5-5-5 1.41-1.41L11 12.17V2h1Z\"\r\n                          />\r\n                        </svg>\r\n                      </div>\r\n                    </td>\r\n                    <td class=\"text-white-color\">\r\n                      {{ file.createdDate }}\r\n                    </td>\r\n                  </tr>\r\n                }\r\n\r\n                <tr class=\"version-separator\">\r\n                  <td colspan=\"3\"></td>\r\n                </tr>\r\n              }\r\n            </tbody>\r\n          </table>\r\n        }\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","/*\r\n * Public API Surface of file-config-library\r\n */\r\n\r\n// export * from './lib/file-config-library.service';\r\n// export * from './lib/file-config-library.component';\r\nexport * from './lib/file-config-library.component';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}