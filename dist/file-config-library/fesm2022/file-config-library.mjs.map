{"version":3,"file":"file-config-library.mjs","sources":["../../../projects/file-config-library/src/lib/services/master.service.ts","../../../projects/file-config-library/src/lib/file-config-library.component.ts","../../../projects/file-config-library/src/lib/file-config-library.component.html","../../../projects/file-config-library/src/public-api.ts","../../../projects/file-config-library/src/file-config-library.ts"],"sourcesContent":["import { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { inject, Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class MasterService {\r\n  readonly http = inject(HttpClient);\r\n  // private BASE_URL: string = 'https://dev-api.file-service.mobioffice.io';\r\n\r\n  //#region POST\r\n  getDetailsWithProcess(payload: any, BASE_URL: string) {\r\n    return this.http.post(`${BASE_URL}/getFilesPath/v4`, payload);\r\n  }\r\n  //#endregion\r\n\r\n  //#region GET\r\n  // getProcessList() {\r\n  //   return this.http.get(`${this.BASE_URL}/pd/v1/FileProcessConfig/getAll`);\r\n  // }\r\n  //#endregion\r\n}\r\n","import { Component, inject, Input, OnInit } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MasterService } from './services/master.service';\r\n\r\n@Component({\r\n  selector: 'lib-file-config-library',\r\n  standalone: true,\r\n  imports: [FormsModule],\r\n  providers: [MasterService],\r\n  templateUrl: `./file-config-library.component.html`,\r\n  styleUrl: `./file-config-library.component.scss`,\r\n})\r\nexport class DashboardUiComponent implements OnInit {\r\n  private masterService = inject(MasterService);\r\n\r\n  ngOnInit() {\r\n    console.log('we are in dashboard library component');\r\n    this.onInit();\r\n  }\r\n\r\n  @Input() BASE_URL: string = 'https://dev-api.file-service.mobioffice.io';\r\n  menus: any = [];\r\n  styleSketchNumber: string | null = null;\r\n  selectedProcessName: string | null = null;\r\n  tableData: any[] = [];\r\n  styleDetailsForDownload: any;\r\n\r\n  onInit() {\r\n    this.getAllMaster();\r\n  }\r\n\r\n  private getAllMaster() {\r\n    // this.masterService.getProcessList().subscribe((res: any) => {\r\n    //   console.log(res);\r\n    //   this.menus = res.data.map((item: any) => {\r\n    //     return { ...item, isSelected: false };\r\n    //   });\r\n    // });\r\n  }\r\n\r\n  itemSelected(item: any) {\r\n    console.log(item);\r\n    this.selectedProcessName = item.processName;\r\n    item.isSelected = true;\r\n    this.menus.map((item: any) => {\r\n      if (item.processName !== this.selectedProcessName)\r\n        item.isSelected = false;\r\n    });\r\n\r\n    if (this.selectedProcessName) {\r\n      const data =\r\n        this.styleDetailsForDownload.filePaths[this.selectedProcessName];\r\n      console.log(data);\r\n      this.prepareTableData(data);\r\n    }\r\n  }\r\n\r\n  prepareTableData(data: any) {\r\n    this.tableData = Object.entries(data).map(([version, files]: any) => ({\r\n      version,\r\n      files: Object.entries(files).map(([fileName, details]: any) => ({\r\n        fileName,\r\n        createdDate: details.createdDate,\r\n        url: details.url,\r\n      })),\r\n    }));\r\n    console.log(this.tableData);\r\n  }\r\n\r\n  enterPressed() {\r\n    const payload = {\r\n      packetBarCode: this.styleSketchNumber,\r\n      rootFolderName: 'uploads',\r\n      isAllVersionNeeded: 1,\r\n    };\r\n\r\n    this.masterService\r\n      .getDetailsWithProcess(payload, this.BASE_URL)\r\n      .subscribe((res: any) => {\r\n        this.styleDetailsForDownload = res;\r\n        if (!!res?.filePaths) {\r\n          const objectKeys = Object.keys(res?.filePaths);\r\n          this.menus = objectKeys.map((item: any) => {\r\n            return { processName: item, isSelected: false };\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  downloadFile(file: any) {\r\n    const encodedUrl = encodeURIComponent(file.url);\r\n    const fullUrl = `${this.BASE_URL}/${encodedUrl}`;\r\n    window.open(fullUrl, '_blank');\r\n  }\r\n}\r\n","<div class=\"dashboard-component p-0 m-0\">\r\n  <!-- input filed to search style / sketch number -->\r\n  <div class=\"p-10 col-3 d-flex flex-column\">\r\n    <label class=\"form-group-label text-white mb-1\">Enter Number</label>\r\n    <input\r\n      type=\"text\"\r\n      class=\"form-control input-background-color text-white\"\r\n      placeholder=\"Enter Number\"\r\n      [(ngModel)]=\"styleSketchNumber\"\r\n      (keydown.enter)=\"enterPressed()\"\r\n    />\r\n  </div>\r\n\r\n  <div class=\"row m-0 p-0 master-container\">\r\n    <div class=\"col-12 m-0 p-0 d-flex\">\r\n      <!-- Sidebar -->\r\n      <div class=\"side__bar d-flex flex-column\">\r\n        @for (item of menus; track item) {\r\n          <div\r\n            class=\"menu-item list-item border-bottom-one\"\r\n            [class.active-menu]=\"item.isSelected\"\r\n            (click)=\"itemSelected(item)\"\r\n          >\r\n            <label class=\"menu-header w-100 cursor-pointer\">\r\n              {{ item.processName }}\r\n            </label>\r\n          </div>\r\n        }\r\n      </div>\r\n\r\n      <!-- Right content -->\r\n      <div class=\"display-container flex-grow-1 ms-3 p-10\">\r\n        <h4 class=\"text-white mb-1 border-bottom-one\">File Details:</h4>\r\n\r\n        <!-- Table -->\r\n\r\n        @if (tableData.length) {\r\n          <table class=\"custom-table w-100 mt-2\">\r\n            <thead>\r\n              <tr>\r\n                <th class=\"text-white opacity-50\">Version</th>\r\n                <th class=\"text-white opacity-50\">File Name</th>\r\n                <th class=\"text-white opacity-50\">Created Date</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              @for (group of tableData; track group.version) {\r\n                @for (\r\n                  file of group.files;\r\n                  track file.fileName;\r\n                  let i = $index\r\n                ) {\r\n                  <tr>\r\n                    <td class=\"text-white opacity-50\">\r\n                      @if (i === 0) {\r\n                        {{ group.version }}\r\n                      }\r\n                    </td>\r\n                    <td>\r\n                      <div class=\"file-cell opacity-50\">\r\n                        <span class=\"file-name text-white\">{{\r\n                          file.fileName\r\n                        }}</span>\r\n\r\n                        <svg\r\n                          class=\"download-icon\"\r\n                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          width=\"16\"\r\n                          height=\"16\"\r\n                          (click)=\"downloadFile(file)\"\r\n                          title=\"Download\"\r\n                        >\r\n                          <path\r\n                            fill=\"currentColor\"\r\n                            d=\"M5 20h14v-2H5v2Zm7-18v10.17l3.59-3.58L17 10l-5 5-5-5 1.41-1.41L11 12.17V2h1Z\"\r\n                          />\r\n                        </svg>\r\n                      </div>\r\n                    </td>\r\n                    <td class=\"text-white opacity-50\">\r\n                      {{ file.createdDate }}\r\n                    </td>\r\n                  </tr>\r\n                }\r\n\r\n                <!-- <tr class=\"version-separator\">\r\n                <td colspan=\"3\"></td>\r\n              </tr> -->\r\n              }\r\n            </tbody>\r\n          </table>\r\n        }\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","/*\r\n * Public API Surface of file-config-library\r\n */\r\n\r\n// export * from './lib/file-config-library.service';\r\n// export * from './lib/file-config-library.component';\r\nexport * from './lib/file-config-library.component';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}